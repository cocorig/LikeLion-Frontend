<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>json 살습</title>
</head>
<body>
 
</body>
<script>
// JSON 이란? (JavaScript Object Notation)은 자바스크립트 객체 형식으로 데이터를 표현하는 문자 기반의 표준 포맷입니다. 다른 방식에 비해 가볍고 자바스크립트와 호환성이 높아 널리 사용됩니다. 쉽게 말해 텍스트로 표현된 정보의 덩어리라고 생각하시면 됩니다.


// json안의 내용은 모두 문자열과 숫자 뿐이다. 문자기반의 포맷

// JSON 메서드

// - JSON.parse(): JSON문자열을 자바스크립트 객체로 변환합니다. (문자열 -> 객체)
// - JSON.stringify() : 자바스크립트 객체를 JSON문자열로 변환합니다.(객체 -> 문자열)


// 1. 문자열이니까 객체로 만듬
const json = '{"result":true, "count":42}'; 
const obj = JSON.parse(json);
console.log(obj); //{result: true, count: 42}

// 2. 안의 데이터 배열을 객체로
const json1 = '[1, 2, 3]'; // 타입은 문자열
const arr = JSON.parse(json);
console.log(arr); 

// 생성자           생성자 함수
// arr instanceof Array 
// true

// 3. 배열안의 배열
const json2 = '[1, 2, [1, 2, 3]]';
const arr2 = JSON.parse(json2);
console.log(arr2);

// 4, 갹체를 문자열로 변환
const obj1 = { "result": true, "count": 42 }
const json3 = JSON.stringify(obj1);
console.log(json3);

//결과: {"result":true,"count":42}
// typeof json3 
// 'string'


// -----SON을 이용한 깊은 복사(데이터의 값 자체를 복사함)--------------------
// l 객체를 문자열화 했다가 다시 객체로 변환하기 때문에 새로운 객체를 생성하는것과 동일합니다. 하지만 함수는 제대로 복사가 불가능하다는 단점이 있습니다. 제대로된 깊은 복사를 위해서는 structuredClone 메소드를 사용해야합니다.
// 전개구문으로 완전한 깊은 복사는 되자않는다
// 깊은 복사를 할 때 해결방법

let l = [10, 20, 30];
let a = JSON.parse(JSON.stringify(l));
a[0] = 1000;

console.log(l);
// a의 값을 변경해도 l의 영향을 주지 않는다 , 완전한 깊은 복사가 됨
// l
// (3) [10, 20, 30]
// a
// (3) [1000, 20, 30]
// JSON.stringify(l)
// -> '[10,20,30]'

let o = { ten: 10, twenty: 20, thirty: { forty: 40 } };
        let a = structuredClone(o);
        // let a = JSON.parse(JSON.stringify(l));

// https://developer.mozilla.org/ko/docs/Web/API/structuredClone
// structuredClone() 전역 함수 이용
// 전역 structuredClone() 메서드는 structured clone 알고리즘을 사용하여 주어진 값의 깊은 복사 (en-US)를 생성합니다.

// 또한, 이 메서드는 새 객체로 복사하는 대신 원래 값에서 전송가능한 객체 (en-US)를 전송될 수 있도록 합니다. 전송된 객체는 원래 객체로부터 분리되고 새 객체로 연결됩니다. 더 이상 원래 객체에 접근할 수 없게 됩니다.


</script>
</html>
